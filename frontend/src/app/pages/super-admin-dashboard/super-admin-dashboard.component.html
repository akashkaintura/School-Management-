<div class="super-admin-container">
    <div class="header">
        <div class="header-left">
            <h1>üåü Super Admin Dashboard</h1>
            <p>Platform-wide management and oversight</p>
        </div>
        <button class="btn btn-primary" (click)="openCreateSchoolModal()">
            + Create School
        </button>
    </div>

    <!-- Message Alert -->
    <div *ngIf="message" class="alert" [class.alert-success]="messageType === 'success'"
        [class.alert-error]="messageType === 'error'">
        {{ message }}
    </div>

    <!-- Platform Statistics -->
    <div *ngIf="stats" class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">üè´</div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.totalSchools || 0 }}</div>
                <div class="stat-label">Total Schools</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.totalUsers || 0 }}</div>
                <div class="stat-label">Total Users</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üë®‚Äçüéì</div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.totalStudents || 0 }}</div>
                <div class="stat-label">Total Students</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">üë®‚Äçüè´</div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.totalTeachers || 0 }}</div>
                <div class="stat-label">Total Teachers</div>
            </div>
        </div>
    </div>

    <!-- Schools Management -->
    <div class="section">
        <h2>Schools Management</h2>

        <div *ngIf="loading" class="loading">
            <div class="spinner"></div>
            <p>Loading schools...</p>
        </div>

        <div *ngIf="!loading" class="table-container">
            <table class="schools-table">
                <thead>
                    <tr>
                        <th>School Name</th>
                        <th>Code</th>
                        <th>Board</th>
                        <th>City</th>
                        <th>Principal</th>
                        <th>Classes</th>
                        <th>Created</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let school of schools">
                        <td><strong>{{ school.name }}</strong></td>
                        <td><span class="code-badge">{{ school.code }}</span></td>
                        <td><span class="board-badge">{{ school.board }}</span></td>
                        <td>{{ school.city }}</td>
                        <td>{{ school.principalName || 'N/A' }}</td>
                        <td>{{ school._count?.classes || 0 }}</td>
                        <td>{{ school.createdAt | date:'short' }}</td>
                    </tr>
                    <tr *ngIf="schools.length === 0">
                        <td colspan="7" class="no-data">No schools found</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Create School Modal -->
    <div *ngIf="showCreateSchoolModal" class="modal-overlay" (click)="closeCreateSchoolModal()">
        <div class="modal modal-large" (click)="$event.stopPropagation()">
            <div class="modal-header">
                <h2>Create New School</h2>
                <button class="close-btn" (click)="closeCreateSchoolModal()">√ó</button>
            </div>
            <div class="modal-body">
                <h3>School Information</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>School Name *</label>
                        <input type="text" [(ngModel)]="createSchoolForm.name" placeholder="e.g., Delhi Public School">
                    </div>
                    <div class="form-group">
                        <label>School Code *</label>
                        <input type="text" [(ngModel)]="createSchoolForm.code" placeholder="e.g., DPS001">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Board *</label>
                        <select [(ngModel)]="createSchoolForm.board">
                            <option *ngFor="let board of boards" [value]="board">{{ board }}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Phone *</label>
                        <input type="tel" [(ngModel)]="createSchoolForm.phone" placeholder="+91-9876543210">
                    </div>
                </div>

                <div class="form-group">
                    <label>Address *</label>
                    <input type="text" [(ngModel)]="createSchoolForm.address" placeholder="Street address">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>City *</label>
                        <input type="text" [(ngModel)]="createSchoolForm.city" placeholder="City">
                    </div>
                    <div class="form-group">
                        <label>State *</label>
                        <input type="text" [(ngModel)]="createSchoolForm.state" placeholder="State">
                    </div>
                    <div class="form-group">
                        <label>Pincode *</label>
                        <input type="text" [(ngModel)]="createSchoolForm.pincode" placeholder="110001">
                    </div>
                </div>

                <div class="form-group">
                    <label>Email *</label>
                    <input type="email" [(ngModel)]="createSchoolForm.email" placeholder="info@school.edu">
                </div>

                <h3>Principal/Admin Details</h3>
                <div class="form-group">
                    <label>Principal Name *</label>
                    <input type="text" [(ngModel)]="createSchoolForm.principalName" placeholder="Full Name">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Principal Email *</label>
                        <input type="email" [(ngModel)]="createSchoolForm.principalEmail"
                            placeholder="principal@school.edu">
                    </div>
                    <div class="form-group">
                        <label>Principal Password *</label>
                        <input type="password" [(ngModel)]="createSchoolForm.principalPassword"
                            placeholder="Temporary password">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" (click)="closeCreateSchoolModal()">Cancel</button>
                <button class="btn btn-primary" (click)="createSchool()">Create School</button>
            </div>
        </div>
    </div>
</div>