<div class="school-settings-container">
  <div class="header">
    <h1>üè´ School Settings</h1>
    <p>Manage your school's information and preferences</p>
  </div>

  <!-- Message Alert -->
  <div *ngIf="message" class="alert" [class.alert-success]="messageType === 'success'" [class.alert-error]="messageType === 'error'">
    {{ message }}
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Loading school data...</p>
  </div>

  <!-- Main Content -->
  <div *ngIf="!loading && school" class="content">
    <!-- Tabs -->
    <div class="tabs">
      <button 
        class="tab" 
        [class.active]="activeTab === 'basic'"
        (click)="setActiveTab('basic')">
        üìã Basic Information
      </button>
      <button 
        class="tab" 
        [class.active]="activeTab === 'board'"
        (click)="setActiveTab('board')">
        üéì Board Affiliation
      </button>
      <button 
        class="tab" 
        [class.active]="activeTab === 'branding'"
        (click)="setActiveTab('branding')">
        üé® Branding
      </button>
    </div>

    <!-- Tab Content -->
    <div class="tab-content">
      <!-- Basic Information Tab -->
      <div *ngIf="activeTab === 'basic'" class="tab-panel">
        <h2>Basic Information</h2>
        <form class="form">
          <div class="form-row">
            <div class="form-group">
              <label>School Name *</label>
              <input type="text" [(ngModel)]="basicForm.name" name="name" required>
            </div>
            <div class="form-group">
              <label>School Code *</label>
              <input type="text" [(ngModel)]="basicForm.code" name="code" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Phone *</label>
              <input type="tel" [(ngModel)]="basicForm.phone" name="phone" required>
            </div>
            <div class="form-group">
              <label>Email *</label>
              <input type="email" [(ngModel)]="basicForm.email" name="email" required>
            </div>
          </div>

          <div class="form-group">
            <label>Address *</label>
            <input type="text" [(ngModel)]="basicForm.address" name="address" required>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>City *</label>
              <input type="text" [(ngModel)]="basicForm.city" name="city" required>
            </div>
            <div class="form-group">
              <label>State *</label>
              <input type="text" [(ngModel)]="basicForm.state" name="state" required>
            </div>
            <div class="form-group">
              <label>Pincode *</label>
              <input type="text" [(ngModel)]="basicForm.pincode" name="pincode" required>
            </div>
          </div>

          <div class="form-group">
            <label>Principal Name</label>
            <input type="text" [(ngModel)]="basicForm.principalName" name="principalName">
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-secondary" (click)="loadSchoolData()">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="saveBasicInfo()" [disabled]="saving">
              {{ saving ? 'Saving...' : 'Save Changes' }}
            </button>
          </div>
        </form>
      </div>

      <!-- Board Affiliation Tab -->
      <div *ngIf="activeTab === 'board'" class="tab-panel">
        <h2>Board Affiliation</h2>
        <div class="board-section">
          <div class="current-board">
            <label>Current Board:</label>
            <div class="board-badge">{{ school.board }}</div>
          </div>

          <div class="form-group">
            <label>Change Board Affiliation</label>
            <select [(ngModel)]="selectedBoard" name="board" class="board-select">
              <option value="">Select Board</option>
              <option *ngFor="let board of boards" [value]="board">{{ board }}</option>
            </select>
          </div>

          <div class="info-box">
            <strong>‚ö†Ô∏è Important:</strong> Changing the board affiliation may affect subjects, curriculum, and reporting. Please ensure this change is intentional.
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-primary" (click)="updateBoard()" [disabled]="saving || !selectedBoard">
              {{ saving ? 'Updating...' : 'Update Board' }}
            </button>
          </div>
        </div>
      </div>

      <!-- Branding Tab -->
      <div *ngIf="activeTab === 'branding'" class="tab-panel">
        <h2>School Branding</h2>
        <div class="branding-section">
          <div class="logo-section">
            <label>Current Logo:</label>
            <div class="logo-display">
              <img *ngIf="currentLogo" [src]="currentLogo" alt="School Logo" class="current-logo">
              <div *ngIf="!currentLogo" class="no-logo">No logo uploaded</div>
            </div>
          </div>

          <div class="upload-section">
            <label>Upload New Logo:</label>
            <input type="file" (change)="onFileSelected($event)" accept="image/*" class="file-input">
            
            <div *ngIf="logoPreview" class="preview-section">
              <label>Preview:</label>
              <img [src]="logoPreview" alt="Logo Preview" class="logo-preview">
            </div>

            <div class="info-box">
              <strong>Requirements:</strong>
              <ul>
                <li>Format: JPG, PNG, or GIF</li>
                <li>Max size: 2MB</li>
                <li>Recommended: Square image (500x500px)</li>
              </ul>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-primary" (click)="uploadLogo()" [disabled]="saving || !selectedFile">
                {{ saving ? 'Uploading...' : 'Upload Logo' }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
